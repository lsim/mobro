<svg viewBox="0 0 1000 1000">
  <defs><!-- The inheritance arrows. refX is the offset from the end of the line to the edge of the target node -->
    <marker id="inheritance-arrow"
            markerWidth="10"
            markerHeight="10"
            refX="20"
            refY="3"
            orient="auto"
            markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L9,3 z"></path>
    </marker>
    <marker id="aggregation-arrow"
            markerWidth="10"
            markerHeight="10"
            refX="20"
            refY="3"
            orient="auto"
            markerUnits="strokeWidth"
            stroke="blue"
            fill="blue">
      <path d="M0,0 L0,6 L9,3 z"></path>
    </marker>
  </defs>
  <!-- The edges first (under the nodes) TODO: upgrade angular - ngClass is buggy -->
  <line *ngFor="let edge of graph.edges"
        class="edge edge--{{edge.data.type}}"
        [ngClass]=""
        [attr.x1]="edge.data.pos1.x" [attr.y1]="edge.data.pos1.y"
        [attr.x2]="edge.data.pos2.x" [attr.y2]="edge.data.pos2.y"
        [attr.marker-end]="'url('+locationPathname+'#'+edge.data.type+'-arrow)'"></line>
  <!-- Now all the nodes -->
  <g *ngFor="let node of graph.nodes"
     [attr.transform]="node.data.transform"
     draggable (mousedrag)="node.data.drag($event)" (dragend)="node.data.dragEnd()">
    <circle [attr.r]="nodeSize/2" class="typegraph__node"></circle>
    <text text-anchor="middle">{{node.data.modelType.name}}</text>
  </g>
</svg>
